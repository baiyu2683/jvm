# 线程安全与锁优化

## 线程安全

![image-20210113154853934](images/线程安全与锁优化/image-20210113154853934.png)

### Java语言中的线程安全

![image-20210113155100498](images/线程安全与锁优化/image-20210113155100498.png)

![image-20210113155140618](images/线程安全与锁优化/image-20210113155140618.png)

![image-20210113155152938](images/线程安全与锁优化/image-20210113155152938.png)

![image-20210113155219664](images/线程安全与锁优化/image-20210113155219664.png)

![image-20210113155233706](images/线程安全与锁优化/image-20210113155233706.png)

![image-20210113155251272](images/线程安全与锁优化/image-20210113155251272.png)

![image-20210113155306269](images/线程安全与锁优化/image-20210113155306269.png)

## 线程安全的实现方法

![image-20210113155410706](images/线程安全与锁优化/image-20210113155410706.png)

![image-20210113155500825](images/线程安全与锁优化/image-20210113155500825.png)

![image-20210113155527835](images/线程安全与锁优化/image-20210113155527835.png)

![image-20210113155549990](images/线程安全与锁优化/image-20210113155549990.png)

![image-20210113155606553](images/线程安全与锁优化/image-20210113155606553.png)

![image-20210113155656151](images/线程安全与锁优化/image-20210113155656151.png)

![image-20210113155719432](images/线程安全与锁优化/image-20210113155719432.png)

## 锁优化

![image-20210113155741475](images/线程安全与锁优化/image-20210113155741475.png)

### 自旋锁与自适应自旋

![image-20210113155817334](images/线程安全与锁优化/image-20210113155817334.png)

### 锁消除

![image-20210113155841419](images/线程安全与锁优化/image-20210113155841419.png)

### 锁粗化

![image-20210113160102848](images/线程安全与锁优化/image-20210113160102848.png)

### 轻量级锁

![image-20210113160127005](images/线程安全与锁优化/image-20210113160127005.png)

![image-20210113160144228](images/线程安全与锁优化/image-20210113160144228.png)

**轻量级锁的工作过程**

![image-20210113160202189](images/线程安全与锁优化/image-20210113160202189.png)

![image-20210113160221037](images/线程安全与锁优化/image-20210113160221037.png)

![image-20210113160237348](images/线程安全与锁优化/image-20210113160237348.png)

![image-20210113160255344](images/线程安全与锁优化/image-20210113160255344.png)

![image-20210113160320514](images/线程安全与锁优化/image-20210113160320514.png)

### 偏向锁

![image-20210113160402861](images/线程安全与锁优化/image-20210113160402861.png)

![image-20210113160420255](images/线程安全与锁优化/image-20210113160420255.png)

![image-20210113160436767](images/线程安全与锁优化/image-20210113160436767.png)